@import "tailwindcss";

@plugin "@tailwindcss/forms";
@plugin "@tailwindcss/typography";

@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentColor);
    }
}

@utility form-input {
    /* FORMS */
    background: inherit;
    color: inherit;
    border-radius: var(--radius-md);
    padding: theme("padding.1") theme("padding.2");
}

@utility form-select {
    background: inherit;
    color: inherit;
    border-radius: var(--radius-md);
    padding: theme("padding.1") theme("padding.2");
}

@utility form-multiselect {
    background: inherit;
    color: inherit;
    border-radius: var(--radius-md);
    padding: theme("padding.1") theme("padding.2");
}

@utility form-textarea {
    background: inherit;
    color: inherit;
    border-radius: var(--radius-md);
    padding: theme("padding.1") theme("padding.2");
}

@utility btn {
    /* BUTTONS */
    padding: theme("padding.1") theme("padding.2");
    border-radius: var(--radius-md);
    font-weight: var(--font-weight-semibold);

    &:hover {
        cursor: pointer;
    }

    &:focus {
        outline: 2px solid transparent;
        outline-offset: 2px;
        cursor: pointer;
    }

    &:disabled {
        background-color: var(--color-gray-600);
        color: var(--color-white);
        border-color: var(--color-gray-600);
        cursor: not-allowed;
    }

    &:hover:disabled {
        background-color: var(--color-gray-600);
        color: var(--color-white);
        border-color: var(--color-gray-600);
        cursor: not-allowed;
    }
}

@utility focus {
    &.btn {
        outline: 2px solid transparent;
        outline-offset: 2px;
        cursor: pointer;
    }
}

@utility btn-primary {
    color: var(--color-white);
    background-color: var(--color-blue-800);
    border: solid theme("borderWidth.DEFAULT") var(--color-blue-800);

    &:hover {
        background-color: var(--color-blue-600);
    }

    &.btn-outline {
        color: var(--color-blue-800);
        background-color: inherit;
        border: solid theme("borderWidth.DEFAULT") var(--color-blue-800);
    }

    &.btn-outline:hover {
        color: var(--color-blue-600);
        background-color: var(--color-gray-100);
        border-color: var(--color-blue-800);
    }

    @media (prefers-color-scheme: dark) {
        &.btn-outline {
            color: var(--color-white);
            border-color: var(--color-gray-500);
        }

        &.btn-outline:hover {
            color: var(--color-blue-300);
            background-color: inherit;
            border-color: var(--color-blue-300);
        }
    }
}

@utility btn-default {
    color: var(--color-white);
    background-color: var(--color-purple-800);
    border: solid theme("borderWidth.DEFAULT") var(--color-purple-800);

    &:hover {
        background-color: var(--color-purple-600);
    }

    &.btn-outline {
        color: var(--color-gray-800);
        background-color: inherit;
        border: solid theme("borderWidth.DEFAULT") var(--color-gray-600);
    }

    &.btn-outline:hover {
        color: var(--color-purple-600);
        background-color: var(--color-gray-100);
        border: solid theme("borderWidth.DEFAULT") var(--color-purple-600);
    }

    @media (prefers-color-scheme: dark) {
        &.btn-outline {
            color: var(--color-white);
            border-color: var(--color-gray-500);
        }

        &.btn-outline:hover {
            color: var(--color-purple-400);
            background-color: inherit;
            border-color: var(--color-purple-300);
        }
    }
}

@utility btn-danger {
    color: var(--color-white);
    background-color: var(--color-red-800);

    &:hover {
        background-color: var(--color-red-600);
    }

    &.btn-outline {
        color: var(--color-red-800);
        border: solid theme("borderWidth.DEFAULT") var(--color-red-800);
    }

    &.btn-outline:hover {
        color: var(--color-red-600);
        background-color: var(--color-gray-100);
        border-color: var(--color-red-800);
    }

    @media (prefers-color-scheme: dark) {
        &.btn-outline {
            color: var(--color-red-500);
            border-color: var(--color-red-500);
        }

        &.btn-outline:hover {
            color: var(--color-red-500);
            background-color: inherit;
            border-color: var(--color-red-500);
        }
    }
}

@utility form-control {
    /* LINKS */

    & a {
        font-weight: var(--font-weight-semibold);
        color: var(--color-black);
    }
    & a:active {
        color: var(--color-blue-600);
    }
    & a:hover {
        color: var(--color-blue-600);
    }

    @media (prefers-color-scheme: dark) {
        & a {
            color: var(--color-white);
        }

        & a:active {
            color: var(--color-blue-300);
        }

        & a:hover {
            color: var(--color-blue-300);
        }
    }
}

@utility markdown {
    & a {
        font-weight: var(--font-weight-semibold);
        color: var(--color-black);
    }
    & a:active {
        color: var(--color-blue-600);
    }
    & a:hover {
        color: var(--color-blue-600);
    }

    @media (prefers-color-scheme: dark) {
        & a {
            color: var(--color-white);
        }

        & a:active {
            color: var(--color-blue-300);
        }

        & a:hover {
            color: var(--color-blue-300);
        }
    }
}

@utility link {
    font-weight: var(--font-weight-semibold);
    color: var(--color-black);
    &.active {
        color: var(--color-blue-600);
    }
    &:hover {
        color: var(--color-blue-600);
    }

    @media (prefers-color-scheme: dark) {
        color: var(--color-white);

        &.active {
            color: var(--color-blue-300);
        }

        &:hover {
            color: var(--color-blue-300);
        }
    }
}

@utility active {
    & .link {
        color: var(--color-blue-600);
    }

    @media (prefers-color-scheme: dark) {
        & .link {
            color: var(--color-blue-300);
        }
    }
}

@utility divide-x {
    @media (prefers-color-scheme: dark) {
        & > * + *,
        & > * {
            border-color: var(--color-gray-600);
        }
    }
}

@utility divide-y {
    @media (prefers-color-scheme: dark) {
        & > * + *,
        & > * {
            border-color: var(--color-gray-600);
        }
    }
}

@utility border {
    /* BORDERS */

    @media (prefers-color-scheme: dark) {
        border-color: var(--color-gray-600);
    }
}

@utility border-t {
    /* BORDERS */

    @media (prefers-color-scheme: dark) {
        border-color: var(--color-gray-600);
    }
}

@utility border-l {
    /* BORDERS */

    @media (prefers-color-scheme: dark) {
        border-color: var(--color-gray-600);
    }
}

@utility border-r {
    /* BORDERS */

    @media (prefers-color-scheme: dark) {
        border-color: var(--color-gray-600);
    }
}

@utility border-b {
    /* BORDERS */

    @media (prefers-color-scheme: dark) {
        border-color: var(--color-gray-600);
    }
}

@layer utilities {
    /* ALPINEJS */

    [x-cloak] {
        display: none !important;
    }

    /* HTMX */
    #hx-indicator {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 9999;
        transition:
        width 300ms ease-out,
        opacity 150ms 150ms ease-in;
        transform: translate3d(0, 0, 0);
    }

    #hx-indicator.htmx-request {
        display: block !important;
    }
    /* MESSAGES */

    .message-error {
        background-color: var(--color-red-600);
    }

    .message-info {
        background-color: var(--color-blue-600);
    }

    .message-success {
        background-color: var(--color-green-600);
    }

    .message-warning {
        background-color: var(--color-yellow-600);
    }
}

@layer components {
    /* search inputs */

    input[type="search"]::-webkit-search-decoration,
    input[type="search"]::-webkit-search-cancel-button,
    input[type="search"]::-webkit-search-results-button,
    input[type="search"]::-webkit-search-results-decoration {
        display: none;
    }

    /* range inputs */

    input[type="range"] {
        --thumbSize: --spacing(4);
        --trackSize: --spacing(1);
        --thumbBg: var(--color-blue-600);
        --trackBg: var(--color-white);
        --progressBg: var(--color-blue-900);

        /* webkit progress workaround */
        --webkitProgressPercent: 0%;
    }
    input[type="range"]:disabled {
        --thumbBg: var(--color-gray-500);
        --trackBg: var(--color-gray-300);
        --progressBg: var(--color-gray-600);
    }

    input[type="range"] {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        height: var(--thumbSize);
        width: 100%;
        margin: 0;
        padding: 0;
    }
    input[type="range"]:focus {
        outline: none;
    }

    /* Thumb */
    input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: var(--thumbSize);
        height: var(--thumbSize);
        background-color: var(--thumbBg);
        border-radius: calc(var(--thumbSize) / 2);
        border: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        margin-top: calc(((var(--thumbSize) - var(--trackSize)) / 2) * -1);
        cursor: pointer;
    }
    input[type="range"]::-moz-range-thumb {
        -moz-appearance: none;
        appearance: none;
        width: var(--thumbSize);
        height: var(--thumbSize);
        background-color: var(--thumbBg);
        border-radius: calc(var(--thumbSize) / 2);
        border: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        margin-top: calc(((var(--thumbSize) - var(--trackSize)) / 2) * -1);
        cursor: pointer;
    }
    input[type="range"]::-ms-thumb {
        -ms-appearance: none;
        appearance: none;
        width: var(--thumbSize);
        height: var(--thumbSize);
        background-color: var(--thumbBg);
        border-radius: calc(var(--thumbSize) / 2);
        border: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        margin-top: calc(((var(--thumbSize) - var(--trackSize)) / 2) * -1);
        cursor: pointer;
    }

    /* Track */
    input[type="range"]::-webkit-slider-runnable-track {
        height: var(--trackSize);
        background-image: linear-gradient(
            90deg,
            var(--progressBg) var(--webkitProgressPercent),
            var(--trackBg) var(--webkitProgressPercent)
        );
        border-radius: calc(var(--trackSize) / 2);
    }

    input[type="range"]::-moz-range-track {
        height: var(--trackSize);
        background-color: var(--trackBg);
        border-radius: calc(var(--trackSize) / 2);
    }
    input[type="range"]::-ms-track {
        height: var(--trackSize);
        background-color: var(--trackBg);
        border-radius: calc(var(--trackSize) / 2);
    }

    /* Progress */
    input[type="range"]::-moz-range-progress {
        height: var(--trackSize);
        background-color: var(--progressBg);
        border-radius: calc(var(--trackSize) / 2) 0 0 calc(var(--trackSize) / 2);
    }
    input[type="range"]::-ms-fill-lower {
        height: var(--trackSize);
        background-color: var(--progressBg);
        border-radius: calc(var(--trackSize) / 2) 0 0 calc(var(--trackSize) / 2);
    }

    @media (prefers-color-scheme: dark) {
        :root {
            color-scheme: dark;
        }
    }
}

@custom-variant htmx-added (& .htmx-added,.htmx-added &);
