{
    "scripts": {
        "dokku": {
            "predeploy": "python manage.py collectstatic --clear --noinput && python manage.py migrate --noinput"
        }
    },
    "formation": {
        "web": {
            "quantity": 1
        },
        "worker": {
            "quantity": 4
        }
    },
    "env": {
        "DISABLE_COLLECTSTATIC": {
            "description": "Do not run collectstatic automatically",
            "value": "1"
        },
        "DJANGO_SETTINGS_MODULE": {
            "description": "Djanog settings module for production",
            "value": "jcasts.settings.production"
        }
    },
    "cron": [
        {
            "command": "python manage.py schedule_podcast_feeds --primary --before=3 --limit=300",
            "schedule": "*/12 * * * *"
        },
        {
            "command": "python manage.py schedule_podcast_feeds --queue=feeds:frequent --after=336 --before=3 --limit=300",
            "schedule": "*/5 * * * *"
        },
        {
            "command": "python manage.py schedule_podcast_feeds --queue=feeds:sporadic --before=336 --limit=300",
            "schedule": "15,45 * * * *"
        },
        {
            "command": "python manage.py crawl_itunes",
            "schedule": "12 5 * * *"
        },
        {
            "command": "python manage.py send_new_episodes_emails",
            "schedule": "17 6 * * 3"
        },
        {
            "command": "python manage.py send_recommendation_emails",
            "schedule": "12 9 * * 1"
        },
        {
            "command": "python manage.py make_recommendations",
            "schedule": "20 3 * * *"
        },
        {
            "command": "python manage.py fetch_top_rated",
            "schedule": "18 4 * * *"
        },
        {
            "command": "python manage.py clearsessions",
            "schedule": "35 1 * * *"
        }
    ]
}
