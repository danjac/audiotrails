{% load i18n %}
{% if user.is_authenticated %}
    {% with target=podcast.get_subscribe_target %}
        <div id="{{ target }}"
            hx-target="this"
            hx-push-url="false"
            hx-swap="outerHTML"
            hx-disinherit="hx-indicator">
            {% if is_subscribed %}
                <button class="btn btn-outline inline-flex items-center"
                    title="{% translate "Unsubscribe from this Podcast" %}"
                    hx-post="{% url 'podcasts:unsubscribe' podcast.id %}">
                    {% icon "eye-slash" css_class="mr-2" %}
                    {% translate "Unsubscribe" %}
                </button>
            {% else %}
                <button class="btn btn-primary inline-flex items-center"
                    title="{% translate "Subscribe to this Podcast" %}"
                    hx-post="{% url 'podcasts:subscribe' podcast.id %}">
                    {% icon "eye" css_class="mr-2" %}
                    {% translate "Subscribe" %}
                </button>
            {% endif %}
        </div>
        {% if request.htmx.target == target %}
            {% include "includes/messages.html" with hx_oob=True %}
        {% endif %}
    {% endwith %}
{% else %}
    <div class="flex items-center">
        <a class="btn btn-primary inline-flex items-center"
            href="{{ podcast.get_absolute_url|login_url }}"
            hx-disable="true"
            title="{% translate "Log in or sign up to subscribe to this podcast" %}">
            {% icon "eye" css_class="mr-2" %}
            {% translate "Subscribe" %}
        </a>
    </div>
{% endif %}
