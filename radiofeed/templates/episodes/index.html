{% extends "base.html" %}
{% load cache i18n %}

{% block title %} | {% translate "New Releases" %}{% if has_subscriptions %} | {% if promoted %} {% translate "Promotions" %}{% else %}{% translate "Subscriptions" %}{% endif %}{% endif %} {% endblock %}

{% block content %}

    {% url 'episodes:index' as index_url %}

    {% translate "Promotions" as t_promotions %}
    {% translate "Subscriptions" as t_subscriptions %}
    {% translate "Find an episode..." as t_find_episode %}

    <div class="sm:flex justify-between items-center mb-3 space-y-2 sm:space-y-0">
        <h1 class="font-bold flex items-center justify-center sm:justify-start text-lg md:text-xl xl:text-2xl">
            {% translate "New Releases" %}
            {% if has_subscriptions %}: {% if promoted %}{{ t_promotions }}{% else %}{{ t_subscriptions }}{% endif %}{% endif %}
        </h1>
        {% if not has_subscriptions %}
            <div class="flex items-center justify-center sm:justify-end space-x-3">
                {% include "includes/search_form.html" with placeholder=t_find_episode %}
            </div>
        {% endif %}
    </div>

    {% if has_subscriptions %}
        <div class="sm:flex items-center justify-between space-y-2 sm:space-y-0 mb-3">
            <div class="flex items-center justify-center sm:justify-start">
                {% if promoted %}
                    <a href="{{ index_url}}"
                        class="link">{{ t_subscriptions }}</a>
                {% else %}
                    <a href="{{ index_url }}?promoted=true"
                        class="link">{{ t_promotions }}</a>
                {% endif %}
            </div>

            <div class="flex items-center justify-center sm:justify-end space-x-3">
                {% include "includes/search_form.html" with placeholder=t_find_episode %}
            </div>
        </div>
    {% endif %}

    {% block pagination %}
        <section role="list" class="space-y-3" id="{{ pagination_target }}">
            {% include "includes/pagination_links.html" %}
            {% for episode in page_obj.object_list %}
                {% include "episodes/includes/episode.html" %}
            {% empty %}
                {% include "includes/empty.html" %}
            {% endfor %}
            {% include "includes/pagination_links.html" %}
        </section>
    {% endblock pagination %}

{% endblock content %}
