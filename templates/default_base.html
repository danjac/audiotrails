{% spaceless %}
    {% load static django_htmx audio_player %}
    <!DOCTYPE html>
    <html lang="en">
        <head>
            <title>{{ request.site.name }}{% block title %}{% endblock title %}</title>
            <link rel="icon" type="image/png" href="{% static 'img/wave-ico.png' %}" />
            <link rel="apple-touch-icon" href="{% static 'img/apple-touch-icon.png' %}" />
            <link rel="stylesheet" text="text/css" href="{% static "css/bundle.css" %}{% if debug %}?{% now "U" %}{% endif %}" />
            <link rel="manifest" href="{% url 'manifest' %}" />
            <link rel=”canonical“ href="{% absolute_uri "/" %}" />
            <meta charset="UTF-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
            <meta name="copyright" content="Dan Jacob {% now "Y" %}" />
            <meta name="htmx-config" content='{"historyCacheSize": 0, "refreshOnHistoryMiss": false}' />
            <meta name="Cache-Control" content="no-cache" />
            <meta name="robots" content="index,follow" />
            <meta name="description" content="Podcast aggregator site" />
            <meta name="keywords" content="podcasts, rss, feeds" />
            <meta name="theme-color" content="#041014" />
        </head>
        <body class="mx-auto font-sans antialiased container-xl scroll-smooth text-sm lg:text-base"
            hx-boost="true"
            hx-target="#content"
            hx-swap="innerHTML show:window:top"
            hx-indicator="#loader"
            hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
            {% include "includes/hx_indicator.html" %}
            <div class="flex flex-col h-screen">
                <div class="flex-grow">
                    {% include "includes/navbar.html" %}
                    {% include "includes/messages.html" %}
                    <div class="relative flex min-h-screen p-2 py-6 xl:pt-12 mx-auto xl:w-11/12">
                        {% if user.is_authenticated %}
                            <aside class="hidden w-full xl:block xl:w-1/5 xl:sticky xl:h-full xl:top-28">
                                {% include "includes/sidebar.html" %}
                            </aside>
                        {% endif %}
                        <main class="w-full xl:block md:mx-auto xl:w-4/5" id="content" hx-history-elt>
                            {% block content %}{% endblock content %}
                        </main>
                    </div>
                    {% cookie_notice %}
                    {% if user.is_authenticated %}
                        {% audio_player %}
                    {% endif %}
                </div>
            </div>
            {% django_htmx_script %}
            <script defer src="{% static "js/bundle.js" %}{% if debug %}?{% now "U" %}{% endif %}"></script>
            <script>
                if (typeof navigator.serviceWorker !== 'undefined') {
                    navigator.serviceWorker.register('{% url "service_worker" %}')
                }
            </script>
        </body>
    </html>
{% endspaceless %}
