{% load static django_htmx audio_player %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>
            {% block title %}
                {{ request.site.name }}
            {% endblock title %}
        </title>
        <link rel="icon" type="image/png" href="{% static 'img/wave-ico.png' %}">
        <link rel="apple-touch-icon" href="{% static 'img/apple-touch-icon.png' %}">
        <link rel="stylesheet" type="text/css" href="{% static "dist/app.css" %}{% if debug %}?{% now "U" %}{% endif %}">
        <link rel="manifest" href="{% url 'manifest' %}">
        <link rel="canonical" href="{{ request.build_absolute_uri }}">
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="copyright" content="Dan Jacob {% now " Y" %}">
        <meta name="cache-control" content="no-cache">
        <meta name="robots" content="index,follow">
        <meta name="description" content="Podcast aggregator site">
        <meta name="keywords" content="podcasts, rss, feeds">
        <meta name="theme-color" content="{{ THEME_COLOR }}">
    </head>
    <body class="mx-auto font-sans text-sm antialiased lg:text-base dark:bg-gray-900 container-xl scroll-smooth"
          hx-boost="true"
          hx-target="#content"
          hx-swap="innerHTML show:window:top"
          hx-indicator="#hx-indicator">
        {% include "_hx_indicator.html" %}
        {% include "_messages.html" %}
        <div class="flex flex-col h-screen">
            <div class="grow">
                {% include "_navbar.html" %}
                <div class="flex relative py-6 px-2 mx-auto min-h-screen">
                    {% if user.is_authenticated %}
                        <aside class="hidden w-full xl:block xl:sticky xl:top-20 xl:w-1/6 xl:h-full">
                            {% include "_sidebar.html" %}
                        </aside>
                    {% endif %}
                    <main class="mx-auto w-full xl:w-5/6" id="content" hx-history-elt>
                        {% block content %}
                        {% endblock content %}
                    </main>
                </div>
            </div>
            {% audio_player %}
            {% cookie_notice %}
        </div>
        {% django_htmx_script %}
        <script defer src="{% static "dist/app.js" %}{% if debug %}?{% now "U" %}{% endif %}"></script>
        <script>
        if (typeof navigator.serviceWorker !== 'undefined') {
            navigator.serviceWorker.register('{% url "service_worker" %}')
        }
        </script>
    </body>
</html>
