{% spaceless %}
    {% load static django_htmx audio_player %}
    {% static "dist/app.css" as static_css %}
    {% static "dist/app.js" as static_js %}
    {% now "U" as timestamp %}
    <!DOCTYPE html>
    <html lang="en">
        <head>
            <title>
                {% block title %}
                    {{ request.site.name }}
                {% endblock title %}
            </title>
            <link rel="icon" type="image/png" href="{% static 'img/wave-ico.png' %}">
            <link rel="apple-touch-icon" href="{% static 'img/apple-touch-icon.png' %}">
            <link rel="preload"
                  as="style"
                  href="{{ static_css }}{% if debug %}?{{ timestamp }}{% endif %}">
            <link rel="preload"
                  as="script"
                  href="{{ static_js }}{% if debug %}?{{ timestamp }}{% endif %}">
            <link rel="stylesheet"
                  href="{{ static_css }}{% if debug %}?{{ timestamp }}{% endif %}">
            <link rel="manifest" href="{% url 'manifest' %}">
            <link rel="canonical" href="{{ request.build_absolute_uri }}">
            <meta charset="UTF-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport"
                  content="width=device-width, initial-scale=1, viewport-fit=cover">
            <meta name="mobile-web-app-capable" content="yes">
            <meta name="apple-mobile-web-app-capable" content="yes">
            <meta name="copyright" content="Dan Jacob {% now " Y" %}">
            <meta name="cache-control" content="no-cache">
            <meta name="robots" content="index,follow">
            <meta name="description" content="Podcast aggregator site">
            <meta name="keywords" content="podcasts, rss, feeds">
            <meta name="theme-color" content="#26323C">
        </head>
        <body class="mx-auto font-sans antialiased container-xl scroll-smooth dark:bg-slate-900"
              hx-boost="true"
              hx-target="#content"
              hx-swap="innerHTML show:window:top"
              hx-indicator="#hx-indicator">
            {% include "_hx_indicator.html" %}
            {% include "_messages.html" %}
            <div class="flex flex-col h-screen">
                <div class="grow">
                    {% include "_navbar.html" %}
                    <div class="flex relative py-6 px-2 mx-auto min-h-screen">
                        {% if user.is_authenticated %}
                            <aside class="hidden w-full xl:block xl:sticky xl:top-20 xl:w-1/6 xl:h-full">
                                {% include "_sidebar.html" %}
                            </aside>
                        {% endif %}
                        <main class="mx-auto w-full xl:w-5/6" id="content" hx-history-elt>
                            {% block content %}
                            {% endblock content %}
                        </main>
                    </div>
                </div>
                {% audio_player %}
                {% cookie_notice %}
            </div>
            {% django_htmx_script %}
            <script defer src="{{ static_js }}{% if debug %}?{{ timestamp }}{% endif %}"></script>
            <script>
        if (typeof navigator.serviceWorker !== 'undefined') {
            navigator.serviceWorker.register('{% url "service_worker" %}')
        }
            </script>
        </body>
    </html>
{% endspaceless %}
