{% load static %}
{% with podcast=result.podcast %}
{% static 'img/podcast-icon.png' as placeholder %}
<section class="p-1 border mb-3 hover:bg-gray-100 dark:hover:bg-gray-900 dark:border-gray-500 flex items-center space-x-3">
  {% if result.image %}
  <div>
    <img height="16"
         width="16"
         loading="lazy"
         alt="{{ result.title }}"
         src="{{ placeholder }}"
         x-data="{
          isLoaded: false,
          src: '{{ result.image }}',
          placeholder: '{{ placeholder }}',
          coverUrl: '{{ result.image }}'
         }"
         x-init="src=placeholder;"
         @load.once="src=coverUrl;isLoaded=true;"
         @error.once="src=placeholder;isLoaded=true;"
         :class="{'filter blur-sm': !isLoaded}"
         :src="src"
         class="object-cover border dark:border-gray-500 h-16 w-16 bg-transparent" />
  </div>
  {% endif %}
  <div class="space-y-2">
    <h2 class="w-64 sm:w-96 md:w-full text-sm truncate">
      {% if podcast and podcast.pub_date %}
      <a href="{{ podcast.get_absolute_url }}"
         title="{{ result.title }}"
         class="link">{{ result.title|truncatechars:120 }}</a>
      {% else %}
      <a href="{{ result.itunes }}"
         title="See {{ result.title }} in iTunes"
         rel="noopener"
         target="_blank"
         class="link">{{ result.title|truncatechars:120 }}</a>
      {% endif %}
    </h2>
    <div class="text-sm flex items-center space-x-3">
      {% if podcast and podcast.pub_date %}
      {% include "podcasts/_preview_toggle.html" %}
      {% else %}
      <button class="opacity-50 cursor-not-allowed"
              disabled
              title="Podcast not in database">
        {% icon "info" css_class="h-6 w-6" %}
      </button>
      {% endif %}
      <a href="{{ result.itunes }}"
         title="See {{ result.title }} in iTunes"
         class="link"
         target="_blank"
         rel="noopener">iTunes</a>
    </div>
  </div>
</section>
{% endwith %}
