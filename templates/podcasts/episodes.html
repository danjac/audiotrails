{% extends "podcasts/detail_base.html" %}
{% load cache heroicons partials %}
{% block title %}
    {{ block.super }} | Episodes
{% endblock title %}

{% block podcast_navbar %}
    {% include "podcasts/detail_base.html#navbar" with current="episodes" %}
    {% cache 300 podcast-episodes-header request.get_full_path %}
        {% if page_obj.has_other_pages or request.search %}
            <nav class="flex justify-center items-center sm:justify-start">
                <ul class="items-center space-y-3 sm:flex sm:space-y-0 sm:space-x-3">
                    {% if request.search %}
                        <li class="flex justify-center items-center sm:justify-end">
                            {% url "episodes:search_episodes" as search_url %}
                            {% include "_search_form.html#button" with label="Search All Episodes" %}
                        </li>
                    {% else %}
                        <li class="flex justify-center items-center mb-3 sm:justify-start sm:mb-0">
                            {% if ordering_asc %}
                                <a href="{{ request.path }}{% querystring order="desc" page=None %}"
                                   class="link">Newest First</a>
                            {% else %}
                                <a href="{{ request.path }}{% querystring order="asc" page=None %}"
                                   class="link">Oldest First</a>
                            {% endif %}
                        </li>
                    {% endif %}
                    <li class="flex justify-center items-center sm:justify-end">
                        {% include "_search_form.html" with placeholder="Search: Podcast" clear_search=True %}
                    </li>
                </ul>
            </nav>
        {% endif %}
    {% endcache %}
{% endblock podcast_navbar %}

{% block podcast_content %}
    {% partialdef pagination inline=True %}
        {% cache 300 podcast-episodes request.get_full_path %}
            {% if page_obj.paginator.count %}
                {% include "episodes/_episodes.html" with is_podcast_detail=True %}
            {% else %}
                <div class="text-center prose sm:text-start dark:prose-invert">
                    {% if request.search %}
                        No episodes for &quot;<strong>{{ request.search.value }}</strong>&quot; found in this podcast.
                    {% else %}
                        This podcast does not have any episodes.
                    {% endif %}
                </div>
            {% endif %}
        {% endcache %}
    {% endpartialdef pagination %}
{% endblock podcast_content %}
