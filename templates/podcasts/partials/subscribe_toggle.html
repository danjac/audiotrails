{% with ICON_CSS="h-5 w-5 md:h-6 md:w-6 mr-2" target=podcast.get_subscribe_target %}
    {% if user.is_authenticated %}
        <div id="{{ target }}"
            hx-target="this"
            hx-push-url="false"
            hx-swap="outerHTML">
            {% if subscribed %}
                <button class="btn btn-secondary inline-flex items-center"
                    title="Unsubscribe from this Podcast"
                    hx-post="{% url 'podcasts:unsubscribe' podcast.id %}">
                    {% include "icons/eye_slash.svg" with css_class=ICON_CSS %}
                    Unsubscribe
                </button>
            {% else %}
                <button class="btn btn-default inline-flex items-center"
                    title="Subscribe to this Podcast"
                    hx-post="{% url 'podcasts:subscribe' podcast.id %}">
                    {% include "icons/eye.svg" with css_class=ICON_CSS %}
                    Subscribe
                </button>
            {% endif %}
        </div>
    {% else %}
        <div class="flex items-center">
            <a class="btn btn-default inline-flex items-center"
                href="{{ podcast.get_absolute_url|login_url }}"
                hx-disable="true"
                title="Log in or sign up to subscribe to this podcast">
                {% include "icons/eye.svg" with css_class=ICON_CSS %}
                Subscribe
            </a>
        </div>
    {% endif %}

    {% if request.htmx.target == target %}
        {% include "partials/messages.html" with hx_oob=True %}
    {% endif %}
{% endwith %}
