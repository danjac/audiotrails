{% extends "podcasts/detail_base.html" %}
{% load cache heroicons %}
{% block title %}
    {{ block.super }} | About
{% endblock title %}
{% block podcast_content %}
    {% with link=podcast.link|force_url %}
        <article class="space-y-3">
            {% if podcast.owner %}
                <h2 class="flex-wrap text-base font-semibold lg:text-lg">
                    {% if link %}
                        <a href="{{ link }}"
                           rel="noopener nofollow"
                           title="Podcast Owner"
                           class="link">{{ podcast.owner }}</a>
                    {% else %}
                        {{ podcast.owner }}
                    {% endif %}
                </h2>
            {% endif %}
            <div class="flex items-center space-x-3 sm:space-x-6">
                {% cover_image podcast.cover_url 200 podcast.cleaned_title css_class="h-32 w-32 lg:h-40 lg:w-40" %}
                <div class="flex flex-col place-content-between h-28 lg:h-32">
                    {% include "podcasts/_subscribe_toggle.html" %}
                    <nav class="flex items-center space-x-3">
                        {% if link and link != podcast.rss %}
                            <div>
                                <a href="{{ link }}" class="link" rel="noopener nofollow">Website</a>
                            </div>
                        {% endif %}
                        <div>
                            <a href="{{ podcast.rss }}" class="link" download>RSS</a>
                        </div>
                        {% if user.is_staff %}
                            <div>
                                <a href="{% url 'admin:podcasts_podcast_change' podcast.id %}"
                                   hx-disable="true"
                                   class="link">Admin</a>
                            </div>
                        {% endif %}
                    </nav>
                    <div class="flex flex-wrap">
                        <a href="{{ podcast.get_latest_episode_url }}"
                           class="link"
                           title="Latest Episode">
                            Latest episode
                            {% include "_date.html" with value=podcast.pub_date %}
                        </a>
                    </div>
                </div>
            </div>
            {% with funding_url=podcast.funding_url|force_url %}
                {% if funding_url %}
                    <div class="flex-wrap font-semibold">
                        <a href="{{ funding_url }}" rel="noopener nofollow">{{ podcast.funding_text|default:'Support this podcast' }}</a>
                    </div>
                {% endif %}
            {% endwith %}
            {% cache 600 podcast-categories podcast.id %}
            {% with categories=podcast.categories.all %}
                {% if categories %}
                    <div class="flex flex-wrap items-center leading-loose max-w-prose space-x-2 sm:space-x-3">
                        {% for category in categories %}
                            <a class="inline-flex items-center link"
                               title="{{ category.name }} Podcasts"
                               href="{{ category.get_absolute_url }}">
                                {% heroicon_mini "tag" class="mr-2" %}
                                {{ category.name }}
                            </a>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
        {% endcache %}
        {% render_html_content podcast.description %}
    </article>
{% endwith %}
{% endblock podcast_content %}
