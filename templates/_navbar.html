{% load static %}
{% url 'episodes:index' as home_url %}
<header class="bg-black dark:bg-gray-800 text-white sticky top-0 w-full z-10 shadow"
        hx-target="#layout"
        hx-swap="outerHTML">
  <div class="flex items-center justify-between p-2">

    <div class="flex items-center flex-shrink-0 mr-6">
      <button class="lg:hidden mr-3"
              title="Toggle Menu"
              x-on:click="sidebar = !sidebar">
        {% icon "menu" css_class="h-6 w-6" %}
      </button>
      <button class="hidden lg:hidden mr-3"
              data-action="toggle#toggle"
              title="Toggle Menu"
              x-on:click="sidebar = !sidebar">
        {% icon "chevron_down" css_class="h-6 w-6" %}
      </button>
      <a {% hx_link home_url %}
         title="{{ request.site.name }}"
         class="mr-4 hidden lg:inline-block">
        <img src="{% static 'img/wave.png' %}"
             height="32"
             width="32"
             alt="{{ request.site.name }}">
      </a>

      <a class="font-bold"
         title="{{ request.site.name }}"
         {% hx_link 'episodes:index' %}>{{ request.site.name }}</a>
    </div>

    <form hx-get="{% url 'podcasts:search_podcasts' %}"
          x-data="{}"
          hx-page-title="Search Podcasts"
          @submit="$refs.input.blur()"
          class="relative bg-transparent hidden sm:block">
      <input type="search"
             x-ref="input"
             name="q"
             accesskey="k"
             autocomplete="off"
             @enter="$refs.input.select()"
             aria-label="{{ placeholder|default:'Search' }}"
             placeholder="Find a podcast..."
             class="px-4 py-1 focus:outline-none rounded focus:ring w-72 placeholder-opacity-100 text-gray-900 dark:text-white dark:bg-gray-900">
      <div class="absolute inset-y-0 right-0 flex items-center pr-3">
        <button type="submit"
                title="Search"
                class="focus:outline-none focus:shadow-outline text-gray-900 dark:text-gray-100">
          {% icon "search" css_class="h-4 w-4" %}
        </button>
      </div>
    </form>

    {% if user.is_authenticated %}
    <form class="text-sm md:text-base flex items-center space-x-3"
          hx-disable="true"
          action="{% url 'account_logout' %}"
          method="post">
      {% csrf_token %}
      <button class="text-white hover:text-blue-500">Logout</button>
    </form>
    {% else %}
    <div class="text-sm md:text-base flex items-center">
      <a {% hx_link home_url|login_url %}
         class="inline-block text-white hover:text-blue-500 mr-3">Login</a>
      <a {% hx_link home_url|signup_url %}
         class="inline-block text-white hover:text-blue-500">Signup</a>
    </div>
    {% endif %}
  </div>
</header>
