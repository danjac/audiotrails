{% if user.is_authenticated %}
<div id="player-toggle">
  {% if is_playing %}
  <button class="btn btn-secondary flex items-center"
          title="Close Player"
          hx-post="{% url 'episodes:close_player' %}"
          hx-target="#player"
          hx-select="#player"
          hx-swap="outerHTML"
          @click="$dispatch('close-player')">
    {% icon "stop" css_class="btn-icon mr-2" %}
    Close Player
  </button>
  {% else %}
  <button class="btn btn-primary flex items-center"
          title="Open Player"
          hx-post="{% url 'episodes:start_player' episode.id %}"
          hx-target="#player"
          hx-select="#player"
          hx-swap="outerHTML">
    {% icon "play" css_class="btn-icon mr-2" %}
    Play Episode
  </button>
  {% endif %}
</div>
{% else %}
<div>
  <a class="btn btn-primary flex items-center"
     title="Log in"
     @click="
      $dispatch('close-modal');
      $dispatch('message', {tag: 'info', message: 'You must log in or sign up to play episodes'});
     "
     {% hx_link episode.get_absolute_url|login_url %}>
    {% icon "play" css_class="btn-icon mr-2" %}
    Play Episode
  </a>
</div>
{% endif %}
