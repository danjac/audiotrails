{% with target=episode.get_history_target %}
    <div id="{{ target }}"{% if hx_oob %} hx-swap-oob="true"{% endif %}>
        {% if listened %}
            <div class="flex flex-wrap items-center font-semibold text-gray-600 space-x-3 dark:text-gray-300">
                <div class="flex items-center space-x-1">
                    <span>Listened</span>
                    {% include "includes/date.html" with value=listened title="Listened" %}
                </div>
                {% if current_time and current_time > 60 %}<div title="Timestamp">{{ current_time|format_duration }}</div>{% endif %}
                {% if not is_playing %}
                    <button class="inline-flex items-center text-xs btn btn-danger lg:text-sm"
                            title="Remove episode from your History"
                            hx-post="{% url 'episodes:remove_audio_log' episode.id %}"
                            hx-disinherit="hx-indicator"
                            hx-push-url="false"
                            hx-target="#{{ target }}"
                            hx-swap="outerHTML"
                            hx-confirm="Are you sure you want to remove this episode from your History?">
                        {% icon "trash" css_class="mr-2" %}
                        Remove
                    </button>
                {% endif %}
            </div>
        {% endif %}
        {% if request.htmx.target == target %}
            {% include "includes/messages.html" with hx_oob=True %}
        {% endif %}
    </div>
{% endwith %}
