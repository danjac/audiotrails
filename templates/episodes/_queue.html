{% with count=queue_items|length %}
{% if count %}
<div data-controller="drag"
     data-drag-handle-class="handle"
     data-drag-group-value="queue-items"
     data-drag-url-value="{% url 'episodes:move_queue_items'%}"
     x-data="{ counter: {{ count }} }"
     @remove-queue-item.window="counter = counter-1"
     id="queue">
  {% else %}
  <div>
    {% endif %}
    {% for item in queue_items %}
    {% with episode=item.episode %}
    <template x-data="{show: true}"
              x-if="show"
              @remove-queue-item.window="if ($event.detail.id === {{ episode.id }}) show=false">
      {% include "episodes/_queue_item.html" with dom_id=episode.dom.queue %}
    </template>
    {% endwith %}
    {% empty %}
    You do not have any items in your Play Queue.
    {% endfor %}
    {% if count %}
    <p x-show="counter === 0">
      All done!
    </p>
    {% endif %}
  </div>
  {% endwith %}
