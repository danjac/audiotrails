{% with podcast=episode.podcast episode_url=episode.get_absolute_url %}
<div class="border dark:border-gray-500 mb-3 flex items-center space-x-2 sm:space-x-3"
     {% if hx_remove %}
     x-data="{show: true}"
     x-show="show"
     x-transition:leave="transition ease-out duration-500"
     x-transition:leave-start="transform opacity-100"
     x-transition:leave-end="transform opacity-0"
     @{{ hx_remove }}.window="if ($event.detail.value === {{ episode.id }}) show=false"
     {% endif %}>


  <div>
    {% with COVER_IMAGE_CSS="h-20 w-20 border-r dark:border-gray-500" %}
    {% if is_podcast_detail %}
    <a href="{{ episode_url }}">
      {% include "_cover_image.html" with cover_url=episode.get_cover_url alt=episode.cleaned_title size=24 css_class=COVER_IMAGE_CSS %}
    </a>
    {% else %}
    <a href="{{ podcast.get_absolute_url }}">
      {% include "_cover_image.html" with cover_url=podcast.cover_url alt=podcast.cleaned_title size=24 css_class=COVER_IMAGE_CSS %}
    </a>
    {% endif %}
    {% endwith %}
  </div>

  {% block content %}
  <div class="space-y-2">
    {% block title %}
    <h2 class="truncate w-60 sm:w-96 lg:w-full">
      <a href="{{ episode_url }}"
         class="link"
         title="{{ episode.cleaned_title }}">
        {{ episode.cleaned_title|truncatechars:120 }}
      </a>

    </h2>
    {% if is_podcast_detail %}
    <div class="font-semibold text-gray-600 dark:text-gray-300 text-xs">
      {% include "episodes/_pub_date.html" with pub_date=episode.pub_date %}
    </div>
    {% else %}
    <h3 class="truncate w-60 sm:w-96 lg:w-full">
      <a href="{{ podcast.get_episodes_url }}"
         class="link text-xs text-gray-500 dark:text-gray-300 font-semibold"
         title="{{ podcast.cleaned_title }}">
        {{ podcast.cleaned_title|truncatechars:120 }}
      </a>
    </h3>
    {% endif %}

    {% endblock title %}

    {% if user.is_authenticated %}
    <div class="flex items-center space-x-2">
      {% include "episodes/_actions_toggle.html" %}
    </div>
    {% endif %}

  </div>
  {% endblock content %}
</div>
{% endwith %}
