{% extends "pagination/_object_list.html" %}

{% block results %}
{% with count=page_obj.paginator.count %}
<div {% if count and not is_paginated %}
     x-data="{ counter: {{ count }} }"
     @remove-favorite.window="counter = counter-1"
     {% endif %}>
  {% for favorite in page_obj %}
  {% with episode=favorite.episode %}
  <template x-data="{show:true}"
            x-if="show"
            @remove-favorite.window="if ($event.detail.id === {{ episode.id }}) show=false">
    {% include "episodes/_episode.html" %}
  </template>
  {% endwith %}
  {% empty %}
  <p class="text-center sm:text-left">
    {% if search %}
    No results found for <span class="font-bold">{{ search }}</span>.
    {% else %}
    You do not have any Favorites at the moment.
    {% endif %}
  </p>
  {% endfor %}
  {% if count and not is_paginated %}
  <p x-show="counter === 0">
    All done!
  </p>
  {% endif %}
</div>
{% endwith %}
{% endblock %}
