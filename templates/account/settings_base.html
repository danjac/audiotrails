{% extends "base.html" %}
{% load heroicons %}
{% block title %}
    | Settings
{% endblock title %}
{% block content %}
    {% if user.is_authenticated %}
        <header class="justify-between items-center pb-3 mb-6 space-y-3 border-b sm:flex sm:space-y-0">
            <h1 class="flex justify-center items-center text-lg font-bold sm:justify-start md:text-xl xl:text-2xl">
                Settings for {{ user.username }}
            </h1>
            <div class="flex justify-center items-center sm:justify-end">
                <nav x-data="{showDropdown: false}" class="relative">
                    <button id="settings-dropdown-btn"
                            tabindex="0"
                            @click="showDropdown = !showDropdown"
                            @click.outside="showDropdown=false"
                            @keyup.escape.window="showDropdown=false"
                            class="flex items-center py-1 px-2 rounded-lg border sm:justify-end focus:ring focus:outline-none link md:hover:bg-transparent">
                        <span class="inline-flex items-center">
                            {% block settings_selected_item %}
                            {% endblock settings_selected_item %}
                        </span>
                        {% heroicon_mini "chevron-down" class="ml-3" %}
                    </button>
                    <div class="absolute z-20 my-2 w-56 bg-white rounded shadow sm:right-1 dark:bg-gray-900 dark:border"
                         x-cloak
                         x-show="showDropdown"
                         x-transition.scape.origin.top>
                        <ul class="py-1 list-none" aria-labelledby="settings-dropdown-btn">
                            {% with DROPDOWN_CSS="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-800" ACTIVE_CSS="font-bold" %}
                                <li>
                                    {% active_link 'users:preferences' css=DROPDOWN_CSS active_css=ACTIVE_CSS as link %}
                                    <a href="{{ link.url }}" tabindex="1" class="{{ link.css }}">
                                        {% heroicon_mini "adjustments-horizontal" class="mr-2" %}
                                    Preferences</a>
                                </li>
                                <li>
                                    {% active_link 'users:stats' css=DROPDOWN_CSS active_css=ACTIVE_CSS as link %}
                                    <a href="{{ link.url }}" tabindex="2" class="{{ link.css }}">
                                        {% heroicon_mini "chart-bar" class="mr-2" %}
                                    Statistics</a>
                                </li>
                                <li>
                                    {% active_link 'users:manage_podcast_feeds' css=DROPDOWN_CSS active_css=ACTIVE_CSS as link %}
                                    <a href="{{ link.url }}" tabindex="3" class="{{ link.css }}">
                                        {% heroicon_mini "rss" class="mr-2" %}
                                    Import/Export Feeds</a>
                                </li>
                                <li>
                                    {% active_link 'account_email' css=DROPDOWN_CSS active_css=ACTIVE_CSS as link %}
                                    <a href="{{ link.url }}" tabindex="4" class="{{ link.css }}">
                                        {% heroicon_mini "envelope" class="mr-2" %}
                                    Email Addresses</a>
                                </li>
                                <li>
                                    {% active_link 'account_change_password' css=DROPDOWN_CSS active_css=ACTIVE_CSS as link %}
                                    <a href="{{ link.url }}" tabindex="5" class="{{ link.css }}">
                                        {% heroicon_mini "key" class="mr-2" %}
                                    Change Password</a>
                                </li>
                                <li>
                                    {% active_link 'socialaccount_connections' css=DROPDOWN_CSS active_css=ACTIVE_CSS as link %}
                                    <a href="{{ link.url }}" tabindex="6" class="{{ link.css }}">
                                        {% heroicon_mini "user-group" class="mr-2" %}
                                    Social Logins</a>
                                </li>
                                <li>
                                    {% active_link 'users:delete_account' css=DROPDOWN_CSS active_css=ACTIVE_CSS as link %}
                                    <a href="{{ link.url }}" tabindex="7" class="{{ link.css }}">
                                        {% heroicon_mini "trash" class="mr-2" %}
                                    Delete Account</a>
                                </li>
                            {% endwith %}
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
    {% endif %}
    {% block settings_content %}
    {% endblock settings_content %}
{% endblock content %}
